import{p as P,a as B,b as E,m as A}from"./index-c8fceb99.js";function C(a,t,i){if(a!==null)for(var e,n,g,p,s,o,l,y=0,c=0,v,S=a.type,L=S==="FeatureCollection",b=S==="Feature",w=L?a.features.length:1,f=0;f<w;f++){l=L?a.features[f].geometry:b?a.geometry:a,v=l?l.type==="GeometryCollection":!1,s=v?l.geometries.length:1;for(var m=0;m<s;m++){var u=0,h=0;if(p=v?l.geometries[m]:l,p!==null){o=p.coordinates;var _=p.type;switch(y=i&&(_==="Polygon"||_==="MultiPolygon")?1:0,_){case null:break;case"Point":if(t(o,c,f,u,h)===!1)return!1;c++,u++;break;case"LineString":case"MultiPoint":for(e=0;e<o.length;e++){if(t(o[e],c,f,u,h)===!1)return!1;c++,_==="MultiPoint"&&u++}_==="LineString"&&u++;break;case"Polygon":case"MultiLineString":for(e=0;e<o.length;e++){for(n=0;n<o[e].length-y;n++){if(t(o[e][n],c,f,u,h)===!1)return!1;c++}_==="MultiLineString"&&u++,_==="Polygon"&&h++}_==="Polygon"&&u++;break;case"MultiPolygon":for(e=0;e<o.length;e++){for(h=0,n=0;n<o[e].length;n++){for(g=0;g<o[e][n].length-y;g++){if(t(o[e][n][g],c,f,u,h)===!1)return!1;c++}h++}u++}break;case"GeometryCollection":for(e=0;e<p.geometries.length;e++)if(C(p.geometries[e],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function k(a){var t=[1/0,1/0,-1/0,-1/0];return C(a,function(i){t[0]>i[0]&&(t[0]=i[0]),t[1]>i[1]&&(t[1]=i[1]),t[2]<i[0]&&(t[2]=i[0]),t[3]<i[1]&&(t[3]=i[1])}),t}k.default=k;function R(a,t){t===void 0&&(t={});var i=k(a),e=(i[0]+i[2])/2,n=(i[1]+i[3])/2;return P([e,n],t.properties,t)}const d=[[141.6499333,42.8265148],[141.6642417,42.8282033],[141.6659061,42.82079423],[141.65157323,42.81910078]],j=B(d),z=R(j),D=P(d[2]),H=P(d[1]);var G=E(D,H);const r=new A.Map({container:"map",style:"https://gsi-cyberjapan.github.io/gsivectortile-mapbox-gl-js/std.json",center:z.geometry.coordinates,zoom:15,pitch:0,bearing:G,attributionControl:!1});r.addControl(new A.AttributionControl({compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a> | Maps are designed by <a href="https://twitter.com/miyakawa_to" target="_blank">宮川俊哉</a>, published under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">"CC BY-SA 4.0</a>" '}));const M={r3_1:[[141.65664656379835,42.82422046147453],[141.656989414642,42.82310319879554],[141.66056547913803,42.822460206561665],[141.6610428663887,42.823510635957675],[141.66049026664896,42.82407233652606],[141.65910213989596,42.825917342857366],[141.6577691121853,42.825487644591206],[141.6577139946536,42.82447701842892],[141.65955941126995,42.823903574311494],[141.65873877246494,42.8228539931026],[141.65815901768724,42.823425949693984],[141.66156813909123,42.823183392832824],[141.6597513019358,42.822288020376874],[141.65976355027618,42.82320435457444],[141.6582386318997,42.82423296844948],[141.66007690365078,42.824975596067155],[141.65914398839232,42.825342414885135],[141.65797427188664,42.82511932941436],[141.65658612664424,42.824721067444926]],r3_2:[[141.65664656379835,42.82422046147453],[141.656989414642,42.82310319879554],[141.66056547913803,42.822460206561665],[141.6610428663887,42.823510635957675],[141.66049026664896,42.82407233652606],[141.66007690365078,42.824975596067155],[141.6577691121853,42.825487644591206],[141.6577139946536,42.82447701842892],[141.65955941126995,42.823903574311494],[141.65976355027618,42.82320435457444],[141.65873877246494,42.8228539931026],[141.65815901768724,42.823425949693984],[141.66156813909123,42.823183392832824],[141.6597513019358,42.822288020376874],[141.6582386318997,42.82423296844948],[141.65822295301655,42.8252819556525],[141.65658612664424,42.824721067444926]],r3_3:[[141.65664656379835,42.82422046147453],[141.65664656379835,42.82422046147453],[141.66056547913803,42.822460206561665],[141.6610428663887,42.823510635957675],[141.66049026664896,42.82407233652606],[141.66007690365078,42.824975596067155],[141.6577691121853,42.825487644591206],[141.6577139946536,42.82447701842892],[141.65955941126995,42.823903574311494],[141.65976355027618,42.82320435457444],[141.65873877246494,42.8228539931026]],r3_4:[[141.65664656379835,42.82422046147453],[141.65664656379835,42.82422046147453],[141.66056547913803,42.822460206561665],[141.6610428663887,42.823510635957675],[141.66049026664896,42.82407233652606],[141.66007690365078,42.824975596067155]]};r.on("load",()=>{r.addSource("r3_1",{type:"image",url:"./hokkaido/4-Sprint_one_more_R3-1.png",coordinates:d}),r.addSource("r3_2",{type:"image",url:"./hokkaido/4-Sprint_one_more_R3-2.png",coordinates:d}),r.addSource("r3_3",{type:"image",url:"./hokkaido/4-Sprint_one_more_R3-3.png",coordinates:d}),r.addSource("r3_4",{type:"image",url:"./hokkaido/4-Sprint_one_more_R3-4.png",coordinates:d}),r.addLayer({id:"r3_1",source:"r3_1",type:"raster",paint:{},style:{}}),r.addLayer({id:"r3_2",source:"r3_2",type:"raster",paint:{},style:{},layout:{visibility:"none"}}),r.addLayer({id:"r3_3",source:"r3_3",type:"raster",paint:{},style:{},layout:{visibility:"none"}}),r.addLayer({id:"r3_4",source:"r3_4",type:"raster",paint:{},style:{},layout:{visibility:"none"}}),r.addSource("route_r3_1",{type:"geojson",data:"./route/r3-1.geojson"}),r.addSource("route_r3_2",{type:"geojson",data:"./route/r3-2.geojson"}),r.addLayer({id:"route_r3_1",type:"line",source:"route_r3_1",paint:{"line-width":2,"line-color":["interpolate",["linear"],["get","standing"],1,"#ff1493",2,"#0000cd",3,"#d2691e"],"line-dasharray":[3,3]}}),r.addLayer({id:"route_r3_2",type:"line",source:"route_r3_2",layout:{visibility:"none"},paint:{"line-width":2,"line-color":["interpolate",["linear"],["get","standing"],1,"#ff1493",2,"#0000cd",3,"#ff8c00"],"line-dasharray":[3,3]}});function a(){var s=document.querySelectorAll(".legend");s.forEach(function(o){o.style.display="none"})}function t(s){var o=document.getElementById(s);o&&(o.style.display="block")}function i(s){length=s.length-3;var o="<option value='99'>All</option>";o+="<option value='0'>△-1</option>";for(var l=1;l<=length;l++)o+="<option value='"+l+"'>"+l+"-"+(l+1)+"</option>";o+="<option value='"+l+"'>"+l+"-◎</option>",secondDropdown.innerHTML="<label><b>Leg</b></label><br><select id= 'leg'>"+o+"</select>",document.getElementById("leg").addEventListener("change",function(){let y=parseInt(this.value);if(y===99)r.fitBounds([d[3],d[1]],{bearing:G,zoom:15});else{console.log(s[y]),console.log(s[y+1]);let c=s[y],v=s[y+1],S=E(c,v),L=B([c,v]);console.log(L);let b=k(L);console.log(b);let w=[b[0],b[1]],f=[b[2],b[3]],m=[w,f];console.log(m),r.fitBounds(m,{padding:{top:100,bottom:100},bearing:S})}})}let e="r3_1",n="r3_1",g="route_"+n,p=M[n];a(),t(n),i(p),document.getElementById("courseSelect").addEventListener("change",function(){r.setLayoutProperty(n,"visibility","none"),r.setLayoutProperty(g,"visibility","none"),e=this.value,g="route_"+e,r.setLayoutProperty(e,"visibility","visible"),r.setLayoutProperty(g,"visibility","visible"),n=e,a(),t(e),p=M[e],i(p)})});
