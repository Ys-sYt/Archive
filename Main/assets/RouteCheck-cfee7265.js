import{p as P,a as B,b as A,m as E}from"./index-c8fceb99.js";function C(a,t,r){if(a!==null)for(var e,n,d,p,s,o,l,y=0,c=0,_,S=a.type,L=S==="FeatureCollection",v=S==="Feature",M=L?a.features.length:1,f=0;f<M;f++){l=L?a.features[f].geometry:v?a.geometry:a,_=l?l.type==="GeometryCollection":!1,s=_?l.geometries.length:1;for(var m=0;m<s;m++){var u=0,h=0;if(p=_?l.geometries[m]:l,p!==null){o=p.coordinates;var b=p.type;switch(y=r&&(b==="Polygon"||b==="MultiPolygon")?1:0,b){case null:break;case"Point":if(t(o,c,f,u,h)===!1)return!1;c++,u++;break;case"LineString":case"MultiPoint":for(e=0;e<o.length;e++){if(t(o[e],c,f,u,h)===!1)return!1;c++,b==="MultiPoint"&&u++}b==="LineString"&&u++;break;case"Polygon":case"MultiLineString":for(e=0;e<o.length;e++){for(n=0;n<o[e].length-y;n++){if(t(o[e][n],c,f,u,h)===!1)return!1;c++}b==="MultiLineString"&&u++,b==="Polygon"&&h++}b==="Polygon"&&u++;break;case"MultiPolygon":for(e=0;e<o.length;e++){for(h=0,n=0;n<o[e].length;n++){for(d=0;d<o[e][n].length-y;d++){if(t(o[e][n][d],c,f,u,h)===!1)return!1;c++}h++}u++}break;case"GeometryCollection":for(e=0;e<p.geometries.length;e++)if(C(p.geometries[e],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function w(a){var t=[1/0,1/0,-1/0,-1/0];return C(a,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}w.default=w;function j(a,t){t===void 0&&(t={});var r=w(a),e=(r[0]+r[2])/2,n=(r[1]+r[3])/2;return P([e,n],t.properties,t)}const g=[[141.38021016,43.03455291],[141.39428776,43.03628007],[141.39595129,43.02903745],[141.38187201,43.0273086]],z=B(g),D=j(z),H=P(g[2]),q=P(g[1]);var G=A(H,q);const i=new E.Map({container:"map",style:"https://gsi-cyberjapan.github.io/gsivectortile-mapbox-gl-js/std.json",center:D.geometry.coordinates,zoom:15,pitch:0,bearing:G,attributionControl:!1});i.addControl(new E.AttributionControl({compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a> | Maps are designed by <a href="https://twitter.com/miyakawa_to" target="_blank">宮川俊哉</a>, published under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">"CC BY-SA 4.0</a>" '}));const k={r3_1:[[141.38184001,43.03118843],[141.38179477,43.03050698],[141.38223947,43.03084647],[141.381776,43.02877852],[141.38388351,43.02831024],[141.38429933,43.02897237],[141.385411,43.0312774],[141.3901289,43.0334642],[141.3904666,43.0328557],[141.3885583,43.0320908],[141.38757917,43.03196422],[141.38611309,43.03130056],[141.38607835,43.03306326],[141.38712985,43.03329407],[141.38820243,43.03311132],[141.38807224,43.03174945],[141.383623,43.0317782],[141.38541067,43.0334691],[141.38505421,43.03100017],[141.38403707,43.03014032],[141.38275855,43.03052668],[141.38181052,43.0298879],[141.38151762,43.03023518],[141.38133067,43.03112553]],r3_2:[[141.38184001,43.03118843],[141.38179477,43.03050698],[141.38223947,43.03084647],[141.381776,43.02877852],[141.38388351,43.02831024],[141.38429933,43.02897237],[141.385411,43.0312774],[141.3901289,43.0334642],[141.3904666,43.0328557],[141.3885583,43.0320908],[141.38757917,43.03196422],[141.38362207,43.03177901],[141.38505523,43.03099735],[141.38404448,43.03014345],[141.38275719,43.03052488],[141.38180894,43.02990263],[141.38151643,43.03023202],[141.38133343,43.03112631]],r3_3:[],r3_4:[]};i.on("load",()=>{i.addSource("r3_1",{type:"image",url:"../public/maps/M21A.png",coordinates:g}),i.addSource("r3_2",{type:"image",url:"../public/maps/A.png",coordinates:g}),i.addSource("r3_3",{type:"image",url:"../public/maps/B.png",coordinates:g}),i.addSource("r3_4",{type:"image",url:"../public/maps/N.png",coordinates:g}),i.addLayer({id:"r3_1",source:"r3_1",type:"raster",paint:{},style:{}}),i.addLayer({id:"r3_2",source:"r3_2",type:"raster",paint:{},style:{},layout:{visibility:"none"}}),i.addLayer({id:"r3_3",source:"r3_3",type:"raster",paint:{},style:{},layout:{visibility:"none"}}),i.addLayer({id:"r3_4",source:"r3_4",type:"raster",paint:{},style:{},layout:{visibility:"none"}}),i.addSource("route_r3_1",{type:"geojson",data:"./route/r3-1.geojson"}),i.addSource("route_r3_2",{type:"geojson",data:"./route/r3-2.geojson"}),i.addLayer({id:"route_r3_1",type:"line",source:"route_r3_1",paint:{"line-width":2,"line-color":["interpolate",["linear"],["get","standing"],1,"#ff1493",2,"#0000cd",3,"#d2691e"],"line-dasharray":[3,3]}}),i.addLayer({id:"route_r3_2",type:"line",source:"route_r3_2",layout:{visibility:"none"},paint:{"line-width":2,"line-color":["interpolate",["linear"],["get","standing"],1,"#ff1493",2,"#0000cd",3,"#ff8c00"],"line-dasharray":[3,3]}});function a(){var s=document.querySelectorAll(".legend");s.forEach(function(o){o.style.display="none"})}function t(s){var o=document.getElementById(s);o&&(o.style.display="block")}function r(s){length=s.length-3;var o="<option value='99'>All</option>";o+="<option value='0'>△-1</option>";for(var l=1;l<=length;l++)o+="<option value='"+l+"'>"+l+"-"+(l+1)+"</option>";o+="<option value='"+l+"'>"+l+"-◎</option>",secondDropdown.innerHTML="<label><b>Leg</b></label><br><select id= 'leg'>"+o+"</select>",document.getElementById("leg").addEventListener("change",function(){let y=parseInt(this.value);if(y===99)i.fitBounds([g[3],g[1]],{bearing:G,zoom:15});else{console.log(s[y]),console.log(s[y+1]);let c=s[y],_=s[y+1],S=A(c,_),L=B([c,_]);console.log(L);let v=w(L);console.log(v);let M=[v[0],v[1]],f=[v[2],v[3]],m=[M,f];console.log(m),i.fitBounds(m,{padding:{top:100,bottom:100},bearing:S})}})}let e="r3_1",n="r3_1",d="route_"+n,p=k[n];a(),t(n),r(p),document.getElementById("courseSelect").addEventListener("change",function(){i.setLayoutProperty(n,"visibility","none"),i.setLayoutProperty(d,"visibility","none"),e=this.value,d="route_"+e,i.setLayoutProperty(e,"visibility","visible"),i.setLayoutProperty(d,"visibility","visible"),n=e,a(),t(e),p=k[e],r(p)})});
